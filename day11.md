#文件 file

数据存储的单位，通常用来长期存储数据，文件中的数据是以字节为单位进行顺序存储的

##文件操作流程

+ 打开文件
+ 读写文件
+ 关闭文件

任何一个操作系统，一个应用同时打开文件的数量有最大数限制

**文件的打开函数open**
```python
open(file, mode = 'rt')
```

用于打开一个文件，返回此文件的对应的文件流对象，如果打开失败，则会触发OSError错误！

**文件关闭方法**

F.close()  关闭，释放系统资源


**文件读写的类型**

+ 文本文件(text file)
+ 二进制文件(binary file)

###文本文件的操作

+ 默认文件的存储都为字符数据，以行为单位进行分割，在python内部统一用'\n'作为换行进行分割
+ 对文本文件读写需要用字符串(str)进行数据的读取和写入

**各种操作系统的换行符**

+ Linux 换行符： ‘\n’
+ Windows 换行符： ‘\r\n’
+ 旧的Macintosh 换行符： ‘\r’
+ 新的Mac 0s 换行符： ‘\n’


**文本文件的写操作**

+ r 打开只读文件，该文件必须存在。 
+ r+ 打开可读写的文件，该文件必须存在。 
+ w 打开只写文件，若文件存在则文件长度清为0，即该文件内容会消失。若文件不存在则建立该文件。 
+ w+ 打开可读写文件，若文件存在则文件长度清为零，即该文件内容会消失。若文件不存在则建立该文件。 
+ a 以附加的方式打开只写文件。若文件不存在，则会建立该文件，如果文件存在，写入的数据会被加到文件尾，即文件原先的内容会被保留。 
+ a+ 以附加方式打开可读写的文件。若文件不存在，则会建立该文件，如果文件存在，写入的数据会被加到文件尾后，即文件原先的内容会被保留。 
+ 上述的形态字符串都可以再加一个b字符，如rb、w+b或ab＋等组合，加入b 字符用来告诉函数库打开的文件为二进制文件，而非纯文字文件。不过在POSIX系统，包含Linux都会忽略该字符。


**文本文件的迭代读取**

open()函数返回的文件流对象是可迭代对象

**示例**
```python
f = open('abc.txt')
#每次读取一行，相当于line = f.readline()
for line in f:
    print(line)
    
#读完之后f.read()#为空
```    

###标准输入输出文件

+ 模块名：sys
+ sys.stdin (默认为标准键盘输入设备)
    + 'Ctrl + d'文件尾部
+ sys.stdout (默认为屏幕终端)
+ sys.stderr (默认为屏幕终端)
+ 标准输入输出不需要结束

###flush方法

强制清空缓存区，数据从缓冲区写入磁盘


##二进制文件操作

+ 'b' 二进制（binary）文件操作
+ 对二进制文件的读写通常需要用字节串(bytes)进行操作
+ 通常用read,write方法

**示例**
```python
f = open("infos.txt", 'rb') #以二进制模式打开
#在此处对f绑定的对象以bytes为单位进行读写


f.close
```
**f.tell**

f.tell方法获取文件当前读写位置
```python

f = open("infos.txt", 'rb') #以二进制模式打开

print("当前的读写位置是：", f.tell()) #0
b = f.read(5)
print("当前的读写位置是：", f.tell()) #5
b = f.read() #读取全部内容
print("文件最后的位置是：", f.tell()) 
f.close()
```

**f.seek方法**

+ f.seek(偏移量，whence = 相对位置)

+ 偏移量
    + 大于0代表文件向文件末尾方向移动
    + 小于0代表向文件头方向移动
+ 相对位置
    + 0 代表从文件头开始
    + 1 代表从当前读写位置开始偏移
    + 2 代表从文件尾开始偏移
    
```python
f = open("infos.txt", 'rb') #以二进制模式打开

f.seek(5, 0) #相对于文件头向后移动5个字节
f.seek(-4,2)#相对于文件尾向前移动15个字节 

b = f.read(2)#已经开始读
f.seek(3,1) #从当前位置开始向后移动3个字节

b = f.read(5)         #在读取5个字节
print(b)

f.close()
```

###汉子编码
+ 国标系列
    + GB18030(二字节或四字节编码)
        + GBK(二字节编码)
            + GB2312(二字节编码)
    + Windows常用
+ 国际标准            
    + UNICODE(2~4字节) <---> UTF-8(1~6字节,汉字3字节)
    + (Linux / Mac 0S X / IOS / Android)常用
    
###python编码（encode）字符串
+ gb2312
+ gbk
+ gb18030
+ utf-8
+ ascii
+ ...

```python
s = '中文'
s.encode('gbk')
s.encode('gb2312')
s.encode('utf-8')
```

**编码注释**

在源文件的第一行或第二行写入以下内容为编码注释
```python
# -*- coding:gbk -*-
#设置源文件编码为：gbk
# -*- coding:utf-8 -*-
#设置源文件编码为:utf-8
```


