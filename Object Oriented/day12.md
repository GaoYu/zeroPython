#面向对象编程

**什么是对象**

对象是指现实中的物体或实体

**什么是面向对象**

把一切看成对象（实例），让对象之间建立关联关系

**对象的特征**

+ 对象有很多属性（名词）
    + 姓名、年龄、性别
    + 用变量存储属性
+ 对象有很多行为（动词）
    + 学习、吃饭、睡觉
    + 用函数描述动作

##类

+ 拥有相同属性和行为的对象分为一组，即为一个类
+ 类是用来描述对象的工具，用类可以创建同类对象


- 车(类)  -------> BYD E6(京A.88888)  实例
       \
        \.----> BMW  X5(京B.00000)  实例

- 狗(类) --------> 小京巴 (户籍号: 000001)
      \
       \------> 导盲犬 (户籍号: 000002)

- int(类)  ------> 100(对象/实例)
        \
         \-----> 200(对象/实例)
         
         
###类的创建语句

**语法**
```python
class 类名（继承列表）:
    '''类的文档字符串'''
    实例方法定义（类内的函数成为方法methon）
    类变量定义
    类方法定义
    静态方法定义
```

**作用**

+ 创建一个类
+ 用于描述此类对象的行为和属性
+ 类用于创建此类的一个或多个对象（实例）


###类和对象

  类    |   对象       实例
class   |  object   instance

###构造函数
```python
表达式:
    类名([创建传参列表])
```

**作用**

创建这个类的实例对象，并返回此实例对象的引用关系

**实例(对象)说明**

+ 实例有自己的作用域和名字空间，可以为该实例添加实例变量（属性）
+ 实例可以调用类方法和实例方法
+ 实例可以访问类变量和实例变量

**示例**
```python
class Dog:
    pass
dog1 = Dog()
```

###实例方法
```python
class 类名(继承列表):
    def 实例方法名(self, 参数1,参数2,... ):
        '''实例方法的文档字符串'''
        语句块
```

**作用**

用于描述一个对象的行为，让此类型的全部对象都拥有相同的行为

**说明**

+ 实例方法实质是函数，是定义在类内部的函数
+ 实例方法至少有一个形参，第一个形参代表调用这个方法的实例，一般命名为'self'

**实例方法的调用语法**
```python
实例.实例方法名（调用传参）

类名.实例方法名(实例，调用传参)
```

###实例属性

每个实例都可以有自己的变量，此变量称为实例变量（也叫属性）

**属性使用方法**

实例.属性名

**赋值规则**

+ 首次为属性赋值则创建此属性
+ 再次为属性赋值则必改变属性的绑定关系

**作用**

用来记录对象自身的数据

###属性的删除
用del语句可以删除一个对象的实例变量

**语法**
```python
del 对象.实例变量名
```

**示例**
```python
class Cat:
    pass
  
c1 = Cat()
c1.color = '白色'
print(c1.color)
del c1.color   #删除属性
print(c1.color) #属性错误，已删除
```

###初始化方法
对新创建的对象添加实例变量（属性）或相应的资源

**语法格式**
```python
class 类名(继承列表):
    def __init__(self[, 形参列表])：
        语句块
```

**说明**

+ 初始化方法名必须为 __init__，不可变
+ 初始化方法会在构造函数创建实例后自动调用，且此实例自身通过第一个参数self传入__init__方法
+ 构造函数的实参将通过__init__方法的形参列表传入__init__方法中
+ 初始化方法内部如果需要返回则只能返回None

**示例**

05_init_method.py

###析构方法
```python
class 类名(继承列表):
    def __del__(self):
    语句块
```
**说明**

对象销毁时被自动调用

**作用**

清理此对象所占用的资源

**python不建议在析构方法内做任何事情，因为对象销毁的原因**


###预置实例属性

**__dict__属性**

此属性绑定一个存储此实例自身变量的字典

```python
class Dog:
    pass
dog1 = Dog()
print(dog1.__dict__)
dog1.kinds = '京巴'
print(dog1.__dict__)
```

**__class__属性**

此属性用来绑定创建此实例的类

可以用于借助属性来访问创建实例

```python
class Dog:
    pass
    
dog1 = Dog()
dog2 = Dog()
dog3 = dog1.__class__  #创建dog1的同类对象
```

###用于类的函数

+ isinstance(obj, class_or_tuple) 
    + 返回这个对象obj是否为某个类class或某些类的实例，如果是则返回True,否则返回 False
+ type(obj) 返回对象的类型
+ issubclass(cls, class_or_tuple)
    + 判读一个类是否继承自其他的类，如果此类cls是class或tuple中的一个派生子类则返回True，否则返回False


**示例**
```python
class Dog:
    pass
class Cat:
    pass
animal = Dog()
isinstance(animal, Dog)  #True
isinstance(animal, Cat)  #False
isinstance(animal, (Cat, int, list)) #False
instance(ainimal(Cat, int , dog))    #True

class A:
    pass
class B(A):
    pass
class C(B):
    pass
issubclass(C, (A, B))  #True
issubclass(C, (int, str)) #False

```

###类变量class variable(也叫类属性)

类变量是类的属性，此属性属于类

**作用**

用来记录类相关的数据

**说明**

+ 类变量可以通过类直接访问
+ 类变量可以通过类的实例直接访问
+ 类变量可以通过此类的实例的__class__属性间接访问

**示例**
```python
class Human:
    count = 0 #创建类变量
```

###类的文档字符串

类内第一个没有赋值给任何变量的字符串是类的文档字符串

**说明**

+ 类的文档字符串用类的__doc__属性可以访问
+ 类的文档字符串可以用help()函数查看

**实例**

classdoc.py

###类的__slots__列表

**作用**

限定一个类的实例只能有固定的属性（实例变量），通常为防止错写属性名而发生运行时错误。

**示例**

05_slots.py

**说明**

含有__slots__列表的类创建的实例对象没有__dict__属性，即此实例不用字典来保存对象的属性（实例变量）

###类方法 @classmethod

类方法是描述类的行为的方法，类方法属于类

**说明**

+ 类方法需要用@classmethod装饰器定义
+ 类方法至少有一个形参，第一个形参用于绑定类，约定写为‘cls’
+ 类与该类的实例都可以调用类方法
+ 类方法不能访问此类创建的实例的属性（只能访问类变量）

**示例**

05_classmethod.py

###静态方法@staticmethod

静态方法不属于类，也不属于类的实例，它相当于定义在类内的普通函数，只是它的作用域属于类

**示例**

07_staticmethod.py


##继承inheritance和派生derived

+ 继承，从已有的类中衍生出新类，新类具有原类的行为，并能扩展新的行为
    + 继承是延续旧类的功能
+ 派生，是从一个已有类中衍生（创建）新类，在新类上可以添加新的属性和行为
    + 派生是为了在旧类的基础上添加新的功能

**作用**

+ 用继承派生机制,可以将一些共有功能加在基类中,实现代码的共享
+ 在不改变基类的基础上改变原有功能

**继承/派生的名词**

+ 基类(base class)/超类(super class)/父类(father class)
+ 派生类(derived class) / 子类(child class)

###单继承
**语法**
```python
class 类名(基类名)：
    语句块
```

**说明**

单继承是指派生类由一个基类衍生出来的类

**示例**

08_inherit.py
09_inherit2.py

**继承说明**

+ 任何类都直接或间接继承自object类
+ object类是一切类的超类（祖类）

**类的__base__属性**

__base__属性用来记录类的基类（父类）

###覆盖 override

**定义**

覆盖是指在有继承关系的类中，子类中实现了与基类同名的方法，在子类实例调用该方法时，实例调用的是子类中的覆盖版本的方法，这种现象叫做覆盖。

**示例**

10_override.py

**子类对象显示调用基类方法的方式**

基类名.方法名(实例， 实际调用传参)

###super函数

+ super(type, obj) 返回绑定超类的实例
+ super()  返回绑定超类的实例，等同于：
    + super(__class__, 实力方法的第一个参数)，必须在方法内调用

**示例**

12_super.py

###显示调用基类的初始化方法

当子类中实现__init__方法时，基类的__init__方法并不会被自动调用，此时需要显示调用

**示例**

13_super.py

